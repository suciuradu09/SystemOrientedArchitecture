# C4 Model Diagrams

## Level 1: System Context Diagram

```
┌─────────────────────────────────────────────────────────────┐
│                                                              │
│  ┌──────────────┐                                           │
│  │    Users     │                                           │
│  └──────┬───────┘                                           │
│         │                                                    │
│         │ Uses                                              │
│         │                                                    │
│  ┌──────▼──────────────────────────────────────────────┐   │
│  │         SOA E-Commerce System                        │   │
│  │                                                       │   │
│  │  Provides:                                           │   │
│  │  - User Management                                   │   │
│  │  - Order Processing                                  │   │
│  │  - Payment Processing                                │   │
│  │  - Real-time Notifications                           │   │
│  └──────────────────────────────────────────────────────┘   │
│                                                              │
│  ┌──────────────┐                                           │
│  │   External   │                                           │
│  │  Payment API │                                           │
│  └──────────────┘                                           │
│                                                              │
└─────────────────────────────────────────────────────────────┘
```

## Level 2: Container Diagram

```
┌─────────────────────────────────────────────────────────────────────┐
│                         SOA E-Commerce System                        │
│                                                                       │
│  ┌──────────────────┐                                                │
│  │   Web App        │  React SPA with Micro Frontend Architecture    │
│  │   (Port 3000)    │                                                │
│  └────────┬─────────┘                                                │
│           │                                                           │
│           │ HTTP/WebSocket                                           │
│           │                                                           │
│  ┌────────▼─────────┐                                                │
│  │   Nginx LB       │  Load Balancer                                 │
│  │   (Port 80)      │                                                │
│  └────────┬─────────┘                                                │
│           │                                                           │
│           │                                                           │
│  ┌────────▼─────────┐                                                │
│  │   API Gateway    │  Secured REST API                               │
│  │   (Port 8080)    │                                                │
│  └───┬───┬───┬───┬──┘                                                │
│      │   │   │   │                                                   │
│      │   │   │   │ HTTP                                              │
│      │   │   │   │                                                   │
│  ┌───▼──┐│ ┌─▼──┐│ ┌───▼──┐ ┌───▼──┐                                │
│  │ User ││ │Order││ │Notif│ │Payment│                                │
│  │Service││ │Service││ │Service│ │Service│                                │
│  │ :3001││ │ :3002││ │ :3003│ │ :3004│                                │
│  └───┬──┘│ └─┬──┘│ └───┬──┘ └───┬──┘                                │
│      │   │   │   │     │        │                                    │
│      └───┴───┴───┴─────┴────────┘                                    │
│           │   │   │     │        │                                    │
│           │   │   │     │        │                                    │
│  ┌────────▼───▼───▼─────▼────────▼──┐                                │
│  │   RabbitMQ  │  Kafka  │  Redis   │                                │
│  │  (Message   │ (Event  │ (Cache/  │                                │
│  │   Broker)   │ Stream) │ PubSub)  │                                │
│  └─────────────┴─────────┴──────────┘                                │
│                                                                       │
│  ┌──────────────┐                                                    │
│  │     FaaS     │  Serverless Functions                              │
│  │   (Port 3005)│                                                    │
│  └──────────────┘                                                    │
│                                                                       │
└─────────────────────────────────────────────────────────────────────┘
```

## Level 3: Component Diagram - API Gateway

```
┌─────────────────────────────────────────────────────────────┐
│                      API Gateway                              │
│                                                               │
│  ┌──────────────────┐  ┌──────────────────┐                 │
│  │  Auth Middleware │  │ Rate Limiter     │                 │
│  │  (JWT Verify)   │  │                  │                 │
│  └────────┬─────────┘  └────────┬─────────┘                 │
│           │                      │                            │
│           └──────────┬───────────┘                            │
│                      │                                        │
│  ┌───────────────────▼──────────┐                            │
│  │     Request Router           │                            │
│  └───┬───┬───┬───┬──────────────┘                            │
│      │   │   │   │                                            │
│      │   │   │   │                                            │
│  ┌───▼──┐│ ┌─▼──┐│ ┌───▼──┐ ┌───▼──┐                        │
│  │ User ││ │Order││ │Notif│ │Payment│                        │
│  │Proxy ││ │Proxy││ │Proxy│ │Proxy │                        │
│  └──────┘│ └─────┘│ └──────┘ └──────┘                        │
│          │        │                                            │
└──────────┼────────┼────────────────────────────────────────────┘
           │        │
           │        │ HTTP
           │        │
    ┌──────▼────────▼──────┐
    │   Microservices      │
    └──────────────────────┘
```

## Level 3: Component Diagram - Order Service

```
┌─────────────────────────────────────────────────────────────┐
│                    Order Service                             │
│                                                               │
│  ┌──────────────────┐  ┌──────────────────┐                 │
│  │  Order Controller│  │  Order Service  │                 │
│  │                  │  │  (Business Logic)│                 │
│  └────────┬─────────┘  └────────┬─────────┘                 │
│           │                      │                            │
│           └──────────┬───────────┘                            │
│                      │                                        │
│  ┌───────────────────▼──────────┐                            │
│  │     Order Repository         │                            │
│  │     (In-Memory Store)        │                            │
│  └──────────────────────────────┘                            │
│                                                               │
│  ┌──────────────────┐  ┌──────────────────┐                 │
│  │ RabbitMQ Client │  │  Kafka Producer  │                 │
│  │                 │  │                  │                 │
│  └──────────────────┘  └──────────────────┘                 │
│                                                               │
└─────────────────────────────────────────────────────────────┘
```

## Level 4: Sequence Diagram - User Registration with Notifications

```
User    Web App    API Gateway  User Service  RabbitMQ  Kafka  Notification Service  Redis
 │         │            │             │            │       │            │              │
 │──Register─────────────────────────────────────────────────────────────────────────>│
 │         │            │             │            │       │            │              │
 │         │            │──POST /register─────────────────────────────────────────────>│
 │         │            │             │            │       │            │              │
 │         │            │             │──Create User──────────────────────────────────>│
 │         │            │             │            │       │            │              │
 │         │            │             │──Publish to Queue────────────────────────────>│
 │         │            │             │            │       │            │              │
 │         │            │             │──Publish Event───────────────────────────────>│
 │         │            │             │            │       │            │              │
 │         │            │             │──Cache User───────────────────────────────────>│
 │         │            │             │            │       │            │              │
 │         │            │             │            │       │<──Consume Event───────────│
 │         │            │             │            │       │            │              │
 │         │            │             │            │       │            │──Create Notification──>│
 │         │            │             │            │       │            │              │
 │         │            │             │            │       │            │──Publish to Redis──>│
 │         │            │             │            │       │            │              │
 │<──Success Response───────────────────────────────────────────────────────────────────│
 │         │            │             │            │       │            │              │
 │         │            │            │            │       │            │──Broadcast via WS──>│
```
